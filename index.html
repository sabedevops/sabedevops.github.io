<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>sabedevops.net</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://sabedevops.net/theme/css/neon.css">
</head>

<body>
  <div class="crt"></div>
  <div class="fog"></div>

  <div class="scene">
    <div class="sign" id="sign">
      <div class="indicator off-air">
        <span class="dot"></span>
        ON&nbsp;AIR
      </div>

      <div class="station" id="station"></div>
      <div class="domain">sabedevops.net</div>
      <div class="status">SITE UNDER CONSTRUCTION</div>
      <div class="tagline">TRANSMITTER IDLE â€” NO CARRIER</div>
    </div>
  </div>

  <script>
    (() => {
      const target = "KR4ERF";
      const targetLower = target.toLowerCase();

      const sign = document.getElementById("sign");
      const station = document.getElementById("station");

      let index = 0;
      let power = 0.6;
      let decaying = false;

      const letters = [...target].map(ch => {
        const span = document.createElement("span");
        span.className = "letter";
        span.textContent = ch;
        span.style.setProperty("--power", power);
        station.appendChild(span);
        return span;
      });

      function reset() {
        index = 0;
        power = 0.6;
        sign.classList.remove("on-air", "decaying");
        letters.forEach(l => {
          l.classList.remove("lit");
          l.style.setProperty("--power", power);
        });
        decaying = false;
      }

      function decayAll() {
        sign.classList.add("decaying");
        let steps = 20;

        const timer = setInterval(() => {
          power -= 0.02;
          letters.forEach(l => l.style.setProperty("--power", power));

          if (--steps === 0) {
            clearInterval(timer);
            reset();
          }
        }, 60);
      }

      document.addEventListener("keydown", e => {
        if (decaying) return;

        const key = e.key.toLowerCase();
        if (key !== targetLower[index]) return;

        power = Math.min(power + 0.18, 1.8);

        const letter = letters[index];
        letter.classList.add("lit");
        letter.style.setProperty("--power", power);

        index++;

        if (index === targetLower.length) {
          sign.classList.add("on-air");
          decaying = true;
          setTimeout(decayAll, 1200);
        }
      });
    })();
  </script>
</body>
</html>